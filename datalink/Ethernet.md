Протокол Ethernet
===================

> **Содержание:**

> - [Варианты сети Ethernet](#варианты-сети-ethernet).
> - [Структура MAC-адреса](#структура-mac-адреса).
> - [Алгоритм доступа CSMA/CD](#алгоритм-доступа-csma-cd).
> - [Нагрузочная способность сети](#нагрузочная-способность-сети).
> - [Оптоволоконная версия Ethernet](#оптоволоконная-версия-ethernet).
> - [Система заземлений при построении сети](#система-заземлений-при-построении-сети).

История создания протокола IEEE-802.3 (Ethernet) достаточно любопытна. Первоначальная версия базировалась на алгоритме доступа ALOHA и предназначалась для установления связи между машинами, раскиданными по Гавайским островам. Позднее компания Ксерокс создала систему на основе алгоритма **CSMA/CD** с быстродействием 2,94Мбит/c. Окончательно принципы сети Ethernet разработаны в 1976 году Меткальфом и Боггсом (фирма Ксерокс). Ethernet совместно со своими скоростными версиями Fast Ethernet (FE), Giga Ethernet (GE) и 10GE занимает в настоящее время абсолютно лидирующее положение. Единственным недостатком данной сети является отсутствие гарантии времени доступа к среде (и механизмов, обеспечивающих приоритетное обслуживание), что делает сеть малоперспективной для решения технологических задач реального времени. Определенные проблемы иногда создает ограничение на максимальное поле данных, равное ~1500 байт.

> *Выбор длины поля данных диктовался уровнем ошибок (BER) для технологий, существовавших на момент разработки стандарта Ethernet.*

Первоначально в качестве среды передачи данных использовался толстый коаксиальный кабель (Z=50 Ом), а подключение к нему выполнялось через специальные устройства (трансиверы). Позднее сети начали строиться на основе тонкого коаксиального кабеля. Но и такое решение было достаточно дорогим. Разработка дешевых широкополосных скрученных пар и соответствующих разъемов открыла перед Ethernet широкие перспективы. Те, кому приходилось работать с коаксиальными кабелями Ethernet, знают, при подсоединении или отсоединении разъема можно получить болезненные удары тока. Для скрученных пар это исключено. Но и эта технология не вечна, скрученные пары мало-помалу уступают свои позиции оптоволоконным кабелям.

> *Для разного быстродействия Ethernet используются разные схемы кодирования, но алгоритм доступа и формат кадра остается неизменным, что гарантирует программную совместимость.*

Не трудно видеть, что все перечисленные физические среды используют последовательный формат передачи информации. К этой разновидности относится и Ethernet (10 Мбит/с ±0,01%). Фирма Ксерокс осуществила разработку протокола Ethernet в 1973 году, а в 1979 году объединение компаний Ксерокс, Интел и DEC (DIX) предоставило документ для стандартизации протокола в IEEE. Предложение с небольшими изменениями было принято комитетом 802.3 в 1983 году. Кадр Ethernet имеет формат, показанный на рис. 1.

> ![рис. 1](http://book.itep.ru/4/41/eth_format.gif)
> *Рис. 1. Формат кадра сетей Ethernet (цифры в верхней части рисунка показывают размер поля в байтах).*

Поле ***преамбула*** содержит 7 байт 0хАА и служит для стабилизации и синхронизации среды (чередующиеся сигналы CD1 и CD0 при завершающем CD0), далее следует поле ***SFD*** (start frame delimiter = 0xab), которое предназначено для выявления начала кадра. Поле EFD (End frame delimiter) задает конец кадра. Поле контрольной суммы (CRC - cyclic redundancy check), также как и преамбула, SFD и ***EFD***, формируются и контролируются на аппаратном уровне. В некоторых модификациях протокола поле efd не используется. Пользователю доступны поля, начиная с *адреса получателя* и кончая полем *информация*, включительно. После crc следует межпакетная пауза (IPG - interpacket gap - межпакетный интервал) длиной 9,6 мксек или более. Максимальный размер кадра равен 1518 байт (сюда не включены поля преамбулы, SFD и EFD). Интерфейс просматривает все пакеты, следующие по кабельному сегменту, к которому он подключен, ведь определить, корректен ли принятый пакет и кому он адресован, можно лишь приняв его целиком. Корректность пакета по CRC, по длине и кратности целому числу байт производится после проверки адреса места назначения. Вероятность ошибки передачи при наличии crc контроля составляет ~2-32. При вычислении CRC используется образующий полином:
> $$ G(x) = x^{32} + x^{26} + x^{23} + x^{22} + x^{16} + x^{12} + x^{11}
> + x^{10} + x^{8} + x^{7} + x^{5} + x^{4} + x^{2} + x + 1. $$

Алгоритм вычисления CRC сводится к вычислению остатка от деления кода M(x), характеризующего кадр, на образующий полином G(x) (Carrier Sense Multiple Access with Collision Detection (CSMA/CD) Access Method and Physical Layer Specification. Published by IEEE (802.3-1985). Wiley-Interscience, John & sons, inc.). CRC представляет собой дополнение полученного остатка R(x). CRC пересылается, начиная со старших разрядов. Схема взаимодействия различных субуровней при реализации протокола IEEE 802.3 показана на рис 2. Выше llc размещаются верхние субуровни, включая прикладной. Через AUI данные передаются с использованием манчестерского кода.

> ![рис. 2](http://book.itep.ru/4/41/802_3_2.gif)
> *Рис. 2. Схема взаимодействия субуровней 802.3 (CSMA/CD).*

Манчестерский код объединяет в бит-сигнале данные и синхронизацию. Каждый бит-символ делится на две части, причем вторая часть всегда является инверсной по отношению первой. В первой половине кодируемый сигнал представлен в логически дополнительном виде, а во второй - в обычном. Таким образом, сигнал логического 0 - CD0 характеризуется в первой половине уровнем HI, а во второй LO. Соответственно сигнал CD1 характеризуется в первой половине бит-символа уровнем LO, а во второй - HI. Примеры форм сигналов при манчестерском кодировании представлены на рис. 3.

> ![рис. 3](http://book.itep.ru/4/41/time_dia.gif)
> *Рис. 3. Примеры кодировки с использованием манчестерского кода.*

----------
####  Варианты сети Ethernet

Ниже в таблице 1 приведены ограничения, налагаемые на сеть Ethernet в целом и на отдельные ее фрагменты.

Тип кабеля | Толстый (10base5) | Тонкий (10base2) | Скрученная пара (10baseT)
:--------  | :-------- | :-------- | :-------- 
Максимальная длина сети (м) | 2500 | 900 | -
Максимальная длина кабельного сегмента (м) | 500 | 185 | 100
Максимальное число подключений к сегменту | 100 | 30 | 1
Минимальное расстояние между точками подключения (м) | 2.5 | 0.5 | -
Максимальное удаление узлов | 5 сегментов и 4 повторителя | 5 сегментов и 4 повторителя | 5 сегментов и 4 повторителя

*Таблица 1. Возможности различных схем реализации Ethernet*

Из таблицы видно, что максимальная задержка в сети Ethernet складывается из:

 1. 4*tr (задержка, вносимая повторителями, при их максимальном числе = 4;  tr - задержка сигнала в репитере, ~20 бит-тактов).
 2. 4,5 нсек/м*5*500м (задержка пяти кабельных сегментов).
 3. 4 нсек/м*2*50м (задержка, вносимая двумя кабелями aui, первого и последнего сегментов).
 4. Задержки сетевых интерфейсов и трансиверов (~2*20 бит-тактов).

В сумме это соответствует ~220 бит-тактам. Минимальная длина пакета должна быть больше удвоенного значения этой задержки (выбрано 64 байта = 512 тактов). Если размер пакета меньше 64 байт, добавляются байты-заполнители, чтобы кадр в любом случае имел соответствующий размер. При приеме контролируется длина пакета и, если она превышает 1518 байт, пакет считается избыточным и обрабатываться не будет. Аналогичная судьба ждет кадры короче 64 байт. Любой пакет должен иметь длину, кратную 8 бит (целое число байт). Если в поле адресата содержатся все единицы, адрес считается широковещательным, то есть обращенным ко всем рабочим станциям локальной сети. Пакет Ethernet может нести от 46 до 1500 байт данных.

> *При подключении ЭВМ к сети непосредственно с помощью переключателя ограничение на минимальную длину кадра теоретически снимается. Но работа с более короткими кадрами в этом случае станет возможной лишь при замене сетевого интерфейса на нестандартный (причем, как у отправителя, так и получателя)!*

----------
#### Структура MAC-адреса

Формат адреса получателя или отправителя (MAC) показан на рис. 4. Для передачи данных на физическом уровне используется манчестерский код.

> ![рис. 4](http://book.itep.ru/4/41/mac_adr.gif)
> *Рис. 4. Формат MAC-адреса.*

В верхней части рисунка указана длина полей адреса, в нижней - нумерация разрядов. Субполе I/G представляет собой флаг индивидуального или группового адреса. I/G = 0 - указывает на то, что адрес является индивидуальным адресом сетевого объекта. I/G = 1 характеризует адрес как мультикастинговый, в этом случае дальнейшее разбиение адреса на субполя теряет смысл. Субполе UL является флагом универсального или местного управления (определяет механизм присвоения адреса сетевому интерфейсу). U/L = 1 указывает на локальную адресацию (адрес задан не производителем и ответственность за уникальность лежит на администраторе LAN). U/L = I/G = 0 характерно для стандартных уникальных адресов, присваиваемых интерфейсу его изготовителем. Субполе ***OUI*** (organizationally unique identifier) позволяет определить производителя сетевого интерфейса. Каждому производителю присваивается один или несколько OUI. Размер субполя позволяет идентифицировать около 4 миллионов различных производителей. За корректность присвоения уникального адреса интерфейса (***OUA*** - Organizationally unique address) несет ответственность производитель. Двух интерфейсов одного и того же производителя с идентичными номерами не должно существовать. Размер поля позволяет произвести примерно 16 миллионов интерфейсов. Комбинация oui и oua составляют ***UAA*** (universally administrated address = IEEE-адрес).

Если в поле кадра *протокол/тип* записан код менее 1500, то это поле характеризует длину кадра. В противном случае - это код протокола, пакет которого инкапсулирован в кадр Ethernet.

Доступ к каналу Ethernet базируется на алгоритме CSMA/CD (carrier sense multiple access with collision detection). В Ethernet любая станция, подключенная к сети, может попытаться начать передачу пакета (кадра), если кабельный сегмент, к которому она подключена, свободен. Свободен ли сегмент, интерфейс определяет по отсутствию "несущей" в течение 9,6 мксек. Так как первый бит пакета достигает остальных станций сети не одновременно, может случиться, что попытку передачи совершат две или более станций, тем более что задержки в повторителях и кабелях могут достигать достаточно больших величин. Такие совпадения попыток называются столкновениями. Столкновение (коллизия) распознается по наличию в канале сигнала, уровень которого соответствует работе двух или более трансиверов одновременно. При обнаружении столкновения станция прерывает передачу. Возобновление попытки может быть произведено после выдержки (кратной 51,2 мксек, но не превосходящей 52 мсек), значения которой является псевдослучайной величиной и вычисляется каждой станцией независимо:

> $$ t=RAND(0,2^{min(n,10)}  ,$$ где n - содержимое счетчика попыток, а число 10 - backofflimit.

Обычно после столкновения время разбивается на ряд дискретных доменов с длиной равной удвоенному времени распространения пакета в сегменте (RTT). Для максимально возможного RTT это время равно 512 бит-тактам. После первого столкновения каждая станция ждет 0 или 2 временного домена, прежде чем совершить еще одну попытку. После второго столкновения каждая из станций может выждать 0, 1, 2 или 3 временного домена и т.д.. После n-ого столкновения случайное число лежит в пределах 

> $$ 0 - (2^{n} - 1)  . $$

После 10 столкновений максимальное значение случайной выдержки перестает расти и остается на уровне 1023.

Теперь рассмотрим поведение сети при наличии k станций, готовых к передаче [46]. Если некоторая станция осуществляет передачу во время домена доступа с вероятностью p, вероятность того, что станция захватит канал равна:

> $$ A = kp(1 - p)^{k - 1}  $$

**A** достигает максимума при p=1/e. A -> 1/e при k ->∞. Среднее число доменов на один доступ равно **1/А**. Так как каждый домен имеет протяженность RTT, то средняя длительность времени доступа составит **RTT/A**. Если среднее время передачи кадра составляет P секунд, то при большом числе станций, готовых к передаче эффективность канала составит P/(P+RTT/A).

> *Таким образом, чем длиннее кабельный сегмент, тем больше среднее время доступа.*

После выдержки станция увеличивает на единицу счетчик попыток и начинает очередную передачу. Предельное число попыток по умолчанию равно 16, если число попыток исчерпано, связь прерывается и выдается соответствующее сообщение. Передаваемый длинный кадр способствует "синхронизации" начала передачи пакетов несколькими станциями. Ведь за время передачи с заметной вероятностью может возникнуть необходимость передачи у двух и более станций. В момент, когда они обнаружат завершение пакета, будут включены таймеры IPG. К счастью информация о завершении передачи пакета доходит до станций сегмента не одновременно. Но задержки, с которыми это связано, являются также причиной того, что факт начала передачи нового пакета одной из станций не становится известным немедленно. При вовлечении в столкновение нескольких станций они могут уведомить остальные станции об этом, послав сигнал "затора" (jam - не менее 32 бит). Содержимое этих 32 бит не регламентируется. Такая схема делает менее вероятным повторное столкновение. Источником большого числа столкновений (помимо информационной перегрузки) может служить запредельная суммарная длина логического кабельного сегмента, слишком большое число повторителей, обрыв кабеля, отсутствие терминатора (50-омного согласователя кабеля) или неисправность одного из интерфейсов. Но сами по себе столкновения не являются чем-то негативным - это механизм, регулирующий доступ к сетевой среде.

Под **логическим кабельным сегментом** (иногда называемым областью столкновений) подразумевается один или несколько кабельных сегментов, объединенных повторителями. Анализ столкновений является одним из средств эффективной диагностики сети. Локальные столкновения (столкновения на сегменте, к которому непосредственно подключена рабочая станция) порождают укороченные пакеты-фрагменты (ведь их передача прерывается) с длиной менее 64 октетов. Большинство трансиверов и репитеров имеют на своих передних панелях индикаторы столкновений. Блок-схема реализации протокола CSMA/CD показана на рис. 5. Особое внимание я бы хотел обратить на влияние сигнала jam. В процессе пересылки столкнувшихся пакетов и за время передачи сигнала jam другие узлы могли захотеть что-то передать. Если таких узлов больше одного, то это приведет к синхронизации начала передачи этими узлами и к увеличению вероятности столкновения. Практически такую "синхронизацию" может осуществить любой достаточно длинный пакет. Такая синхронизация является причиной "коллапса" сети при большой загрузке.

> *Обойти проблему роста вероятности столкновений в сети можно, исключив из сети повторители и строя сеть исключительно на основе переключателей и маршрутизаторов, работающих в полнодуплексном режиме.*


----------
#### Алгоритм доступа CSMA-CD

> ![рис. 5](http://book.itep.ru/4/41/csma_cd.gif)
> *Рис. 5. Блок-схема реализации алгоритма доступа к сетевой среде CSMA/CD.*

Метод CSMA/CD создает неопределенность времени доступа к сети, что делает ее неудобной для решения некоторых задач управления в реальном масштабе времени, где требуется малое время реакции системы на внешнее воздействие.

> ![рис. 6](http://book.itep.ru/4/41/ether.gif)
> *Рис. 6. Схема некоторых возможных вариантов подключения рабочих станций к Ethernet.*

Исторически первой появилась схема подключения к толстому 50-омному коаксиальному кабелю (сегмент 1 на рис. 4.1.1.1.6; Z=50 ±2 Ом) через трансивер и многожильный кабель типа AUI (attachment unit interface, максимальная длина 50 м). Трансивер подключается к кабелю методом "наколки", то есть во внешней оплетке и изоляции сверлится с помощью специального инструмента отверстие и через него осуществляется контакт трансивера с центральной жилой кабеля и экраном. Кабель по возможности не должен содержать сросток, в противном случае его предельная длина должна быть сокращена. Кабельный сегмент должен быть согласован с обоих сторон с помощью терминаторов (50 Ом ±1%). Позднее стала популярной схема соединений через тонкий коаксиальный кабель и t-образные коаксиальные разъемы (волновое сопротивление 50 Ом). В настоящее время наибольшее применение находит схема со специальными многовходовыми повторителями-концентраторами (Hub) и подключением оконечного оборудования через скрученные пары. Для подключения используется 8-контактный разъем RJ-45. Этому способствует удешевление категорированных скрученных пар, соответствующих повторителей, а также большая надежность и лучшая ремонтоспособность таких сетей. Следует иметь в виду, что предельные длины для коаксиальных кабелей, приведенные в таблице 1 относятся к зарубежным типам, в частности в случае тонкого кабеля - это rg-58. Отечественные разновидности кабеля, например РК-50-2-11, допускают (при максимальной загрузке) длины примерно в 1,3-1,5 раз меньше. Это связано с меньшим сечением центральной жилы и большей вариацией волнового сопротивления. Если же число ЭВМ подключенных к кабельному сегменту много меньше предельного, допускается использование и запредельных длин кабельных сегментов, но это не рекомендуется. Пропускная способность сети с методом доступа csma/cd снижается по мере роста загрузки из-за увеличения вероятности столкновений. По этой причине даже использование 100-мегагерцного Ethernet не может гарантировать большей пропускной способности (по сравнению с обычным, см. рис. 8) при условии высоких загрузок и, как следствие, высоких вероятностей столкновений. Ethernet-интерфейс перед началом передачи контролирует состояние кабельного сегмента (наличие несущей), выжидает некоторое время, если сегмент занят, после чего производит попытку передачи с контролем возможности столкновения.

Если в поле адресата содержатся все единицы, адрес считается широковещательным, то есть обращенным ко всем рабочим станциям локальной сети. Пакет Ethernet может нести от 46 до 1500 байт данных. Схема интерфейса на уровне ***MAU*** (Media Attachment Unit) в упрощенном виде имеет вид, показанный на рис. 7.

> ![рис. 7](http://book.itep.ru/4/41/mau.gif)
> *Рис. 7. Схема интерфейса на уровне MAU.*

Схема signal quality регистрирует коллизии и другие искажения сигнала и выдает в этом случае флаг SQE (signal quality error). SQE представляет собой сигнал CS0, посылаемый от MAU к DTE (точнее PMA к PLS, см. рис. 2). Сигнал SQE посылается mau также в случае завершения процесса передачи (output_idle). Узел isolate служит для блокировки передачи данных в сетевую среду, при этом DTE передает MAU сигнал CS0. Суммарная емкостная нагрузка, вносимая MAU, не должна превышать 4 пф. Входное сопротивление должно быть более 100 ком, а ток утечки должен лежать в пределах +2 мкА -25 мкА. Выходной драйвер MAU при передаче выдает в кабель -90 ±4мa (эквивалентно -2,05В на нагрузке 25 Ом). Предельное ослабление сигнала на длине 500 м не должно превышать 8,5 дБ (на частоте 10 МГц).

При передаче сигнал распространяется в обоих направлениях по кабелю от точки подключения интерфейса. При использовании тонкого кабеля интерфейс должен иметь максимально большое входное сопротивление и минимально возможную входную емкость, чтобы вносить минимальные искажения для сигналов, распространяющихся по сегменту. В случае работы со скрученными парами на "кабельный сегмент" подключается только один интерфейс. Максимальное время прохождения сигнала между узлами сети, принадлежащих одному сегменту, называется окном коллизий и является важной рабочей характеристикой.

Помимо столкновений в сети может быть зарегистрировано появление ложной несущей (FCE - false carrier event) - битовая последовательность не имеет байта SFD, соответствующего конкретному типу физической среды. Появление ложной несущей обычно связано с состоянием кабеля или шумами. Если фиксируется появление двух ложных несущих подряд, повторитель должен отключить порт (перевести в состояние link unstable) и послать сигнал jam во все остальные порты. Сигнал jam должен продолжаться до конца потока данных, вызвавшего появление ложной несущей. Если канал восстановлен, повторитель переводит порт в нормальное состояние. Отключение порта возможно также при возникновении множественных коллизий (ECE - excessive collision error) - более 60 коллизий подряд. После блокировки порта он будет восстановлен, если в течении 500 тактов коллизии не обнаружены или при повторном включении повторителя. Если рассмотреть зависимость пропускной способности сети L от ее суммарной загрузки L in, мы для Ethernet получим кривую, показанную на рис. 8.

----------
#### Нагрузочная способность сети

> ![рис. 8](http://book.itep.ru/4/41/load.gif)
> *Рис. 8. Зависимость пропускной способности l in сети со схемой доступа CSMA/CD от суммарной загрузки l .*

Вначале эта зависимость линейна и на участке А пропускная способность удовлетворительна. Но при больших входных загрузках из-за коллизий сначала наступает насыщение, а затем и резкий спад (Ethernet collapse). Это свойство сетей с CSMA/CD дает определенные преимущества сетям с маркерным доступом: Token Ring, FDDI и др.

> *Учитывая эту особенность Ethernet, создатели сетей должны ориентироваться не на предельно допустимые длины сегментов (потом пригодится), а на минимально необходимые длины. Чем меньше длина логического сегмента, тем меньше вероятность столкновения и тем больше его реальная пропускная способность (меньше длина домена (RTT)). А еще лучше - исключите из пользования повторители.*

При диагностировании сетей не всегда под руками может оказаться настоящий сетевой тестер типа Wavetek, и часто приходится довольствоваться обычным авометром. В этом случае может оказаться полезной таблица 2, где приведены удельные сопротивления используемых сетевых кабелей. Произведя измерение сопротивления сегмента, вы можете оценить его длину.

| Коаксиал  | Ом/сегмент | Ом/сегмент |
| :------- | :----      | :---  |
| 10base5  | 5          | 500 м |
| 10base2  | 10         | 185 м |

| Скрученная пара  | Ом/100 м | 
| :-------        | :----    |
| 24 awg          | 18,8     |
| 22 awg          | 11,8     |

> *Таблица 2. Сопротивление кабеля по постоянному току  (Handbook of LAN Cable Testing. Wavetek Corporation, California)*

Данные, приведенные в таблице, могут использоваться для оперативной предварительной оценки качества кабельного сегмента (соответствует стандарту EIA/TIA 568, 1991 год).

Помимо уже описанных модификаций сетей Ethernet в последнее время получили распространение сети для частот 100 Мбит/с, которые базируются на каналах, построенных из скрученных пар или оптоволоконных кабелей. Оптические связи используются и в обычном 10-мегагерцном Ethernet (10base-FL, стандарт разработан в 1980 году, см. рис. 9).

----------
#### Оптоволоконная версия Ethernet

Оптоволоконная версия Ethernet привлекательна при объединении сегментов сети, размещенных в различных зданиях, при этом увеличивается надежность сети, так как ослабляется влияние электромагнитных наводок, исключается влияние различия потенциалов земли этих участков сети. Облегчается переход от 10- к 100-мегагерцному Ethernet, также можно использовать уже имеющиеся оптоволоконные каналы, ведь они будут работать и на 100 Мбит/с (возможна реализация сетей со смешанной структурой, где используется как 100- так и 10-мегагерцное оборудование). На программном уровне 10- и 100-МГц ethernet не различимы. Требования к параметрам опто-волоконных кабелей не зависят от используемого протокола (FDDI, Token Ring, Fast Ethernet и т.д.) и определяются документом EN 50173 (European norm). Это утверждение не относится к топологии кабельных связей, которые в общем случае зависят от используемого протокола. При работе с оптоволоконными системами необходимы специальные тестеры, способные измерять потери света и отражения методом OTDR (рефлектометрия с использованием метода временных доменов). При пассивной звездообразной схеме длины оптоволоконных сегментов могут достигать 500 метров, а число подключенных ЭВМ - 33. Для передачи сигналов используются многомодовые волокна (MMF) с диаметром ядра 62,5 микрон и клэдинга 125 микрон. Длина волны излучения равна 850 (или 1350) нанометров при ослаблении сигнала в кабельном сегменте не более 12,5 дБ. Обычный кабель имеет ослабление 4-5 дБ/км или даже менее. Оптические разъемы должны соответствовать требования стандарта ISO/IEC BFOC/2,5 и вносить ослабление не более 0,5 - 2,0 дБ. Количество используемых MAU в логическом сегменте не должно превышать двух.

> ![рис. 9](http://book.itep.ru/4/41/eth_fl.gif)
> *Рис. 9. Схема 10-мегагерцного оптоволоконного Ethernet (для 100 Мбит/с схема с минимальными модификациями аналогична).*

На данном рисунке видно, что соединения повторителя с FOMAU является дуплексным, аналогичные возможности предоставляют многие современные переключатели. Полно дуплексное подключение оборудование во многих случаях может обеспечить практическое удвоение скорости обмена и, что возможно более важно, исключить столкновения пакетов. Схема полно дуплексного соединения показана на рис. 10.

> ![рис. 10](http://book.itep.ru/4/41/eth_dupl.gif)
> *Рис. 10. Схема реализации полно дуплексного канала Ethernet. (Буква К с цифрой отмечает номера ножек контактов разъема).*

При практической реализации локальной сети обычно возникает проблема защиты и заземления. Если этой проблеме не уделить внимание в самом начале она даст о себе знать позднее и обойдется ее решение дороже. Можно выделить три аспекта. Безопасность персонала, работающего с ЭВМ и сетевым оборудованием, устойчивость к внешним наводкам и помехам, а также безопасность самого сетевого оборудования (противостояние грозовым разрядам или резким скачкам в сети переменного тока (обычно ~220 В)). Безопасность персонала обеспечивается тем, что все объекты, за которые может взяться человек, должны иметь равные потенциалы и в любом случае разница потенциалов не должна превышать 50 вольт. При работе с коаксиальным кабелем существуют рекомендации его заземления в одной точке. Возникает вопрос, что делать с заземлением экранов в случае использования экранированных скрученных пар? Этой проблеме посвящена, например, статья в журнале LANline Special Juli/August 2002 страницы 27-32. Следует сразу заметить, что нужно избегать совмещения применения экранированных и неэкранированных скрученных пар в пределах одной системы. Представляется также естественной и разумной зонная концепция, рассматриваемая в упомянутой статье. На рис. 11 показана схема защиты. Эта схема содержит защитные выключатели на случай грозы или бросков напряжения (линия L). Буквой N обозначена нулевая (нейтральная) шина, а буквами PE - защитная шина.

----------
#### Система заземлений при построении сети

> ![рис. 11](http://book.itep.ru/4/41/grounding.gif)
> *Рис. 11. Схема защиты для случая использования экранированных скрученных пар.*

> ![рис. 12](http://book.itep.ru/4/41/gnd_zones.gif)
> *Рис. 12. Зоны заземлений.*

Земли-экраны соседних зон соединяются только в одной точке. Между зонами могут включаться пограничные устройства фильтрации, предназначенные для снижения уровня шумов и помех. В пределах зоны все устройства должны быть эквипотенциальны. Это достигается за счет подключения к общему экрану.
Следует учитывать, что для сетей Ethernet практически нет ограничений по размеру (за счет использования оптоволоконных переключателей). Сеть может быть локальной, общегородской или даже междугородней. **Надо только помнить, что число машин в такой сети ограничивается имеющейся емкостью таблиц переадресации сетевых переключателей (switch), на базе которых построена эта сеть.**
