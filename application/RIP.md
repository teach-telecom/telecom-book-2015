
# RIP (сетевой протокол)

| Название | Уровень (по [модели OSI][2]) | Создан в | Порт/ID | Назначение протокола |  Спецификация |
| :------- | :------- | :------- | :------- | :------- | :------- |
| Протокол маршрутной информации | Прикладной | [1969][3] г. | 520/[UDP][4] | Маршрутизация в малых сетях | [RFC 1058][5] (v1), [RFC 2453][6] (v2) |

**Протокол маршрутной информации** ([англ.][7]&nbsp; _**R**outing **I**nformation **P**rotocol_) — один из самых простых [протоколов][8] [маршрутизации][9]. Применяется в небольших [компьютерных сетях][10], позволяет [маршрутизаторам][11] динамически обновлять маршрутную информацию (направление и дальность в [хопах][12]), получая ее от соседних маршрутизаторов.

## История

[Алгоритм][13] маршрутизации RIP ([алгоритм Беллмана — Форда][14]) был впервые разработан в [1969 году][15], как основной для сети [ARPANET][16].

Прототип протокола RIP — [Gateway Information Protocol][17], часть пакета [PARC Universal Packet][18].

Версия RIP, которая поддерживает [протокол интернета][19] была включена в пакет [BSD][20] операционной системы [Unix][21] под названием _routed_ (route daemon), а также многими производителями, реализовавшими свою версию этого протокола. В итоге протокол был унифицирован в документе [RFC 1058][5].

В период с 1993 по 1998 годы разрабатывался протокол RIP-2 ([RFC 2453][6]), который является расширением протокола RIP, обеспечивающим передачу дополнительной маршрутной информации в сообщениях RIP и повышающим уровень безопасности.

Для работы в среде [IPv6][22] была разработана версия [RIPng][23].

## Техническая информация

RIP — так называемый протокол [дистанционно-векторной маршрутизации][24], который оперирует [транзитными участками][12] в качестве метрики маршрутизации. Максимальное количество хопов, разрешенное в RIP — 15 (метрика 16 означает «бесконечно большую метрику»). Каждый RIP-маршрутизатор по умолчанию вещает в сеть свою полную таблицу маршрутизации раз в 30 секунд, довольно сильно нагружая низкоскоростные линии связи. RIP работает на 4 уровне (уровень приложения) стека [TCP/IP][25], используя [UDP][4] порт 520.

В современных сетевых средах RIP — не самое лучшее решение для выбора в качестве протокола маршрутизации, так как его возможности уступают более современным протоколам, таким как [EIGRP][26], [OSPF][27]. Ограничение на 15 хопов не дает применять его в больших сетях. Преимущество этого протокола — простота конфигурирования.

### Формат RIP пакета

![Рис. 1](http://i.imgur.com/sLyZwI5.png)

* Command — команда, определяет назначение датаграммы (1 — request; 2 — response)
* Version — номер версии, в зависимости от версии, определяется формат пакета
* Routing Domain — идентификатор RIP-системы, к которой принадлежит данное сообщение; часто — номер автономной системы. Используется, когда к одному физическому каналу подключены маршрутизаторы из нескольких автономных систем, в каждой автономной системе поддерживается своя таблица маршрутов. Поскольку сообщения RIP рассылаются всем маршрутизаторам, подключенным к сети, требуется различать сообщения, относящиеся к «своей» и «чужой» автономным системам. Поле использовалось короткое время в версии протокола RIP-2. В протоколе RIP-1 и в текущей версии RIP-2 не используется.
* RIP Entry (RTE) — запись маршрутной информации RIP. RIP пакет может содержать от 1 до 25 записей RIP Entry.

#### Формат RIP Entry для протокола RIP-1

Поле **Version** = 1.

![Рис. 2](http://i.imgur.com/NEocVwx.png)

* Address family identifier (AFI) — тип адреса, обычно поддерживается только запись AF_INET, которое равно 2 (т.&nbsp;е. используется для протокола IP).
* Must be zero — должно быть нулём.
* IPv4 address — IP адрес места назначения (хост или сеть)
* Metric — метрика маршрута

#### Формат RIP Entry для протокола RIP-2

Поле **Version** = 2.

![Рис. 3](http://i.imgur.com/K7BpYeb.png)

* Address Family Identifier (AFI) — тип адреса, обычно поддерживается только запись AF_INET, которое равно 2 (т.е. используется для протокола IP).
* Route Tag (RT) — тег маршрута. Предназначен для разделения «внутренних» маршрутов от «внешних», взятых, например, из другого IGP или EGP.
* IP Address — IP адрес места назначения.
* Subnet Mask — маска подсети
* Next Hop — следующий хоп. Содержит IP адрес маршрутизатора к месту назначения. Значение 0.0.0.0 — хопом к месту назначения является отправитель пакета. Необходимо, если протокол RIP не может быть запущен на всех маршрутизаторах.
* Metric — метрика маршрута.

#### Аутентификация

При включенной аутентификации производится обработка только тех сообщений, которые содержат правильный аутентификационный код. Это используется для повышения безопасности передачи RIP пакетов. Есть возможность шифровать аутентификационный код с помощью MD5.

![Рис. 4](http://i.imgur.com/e5hZWS5.png)

[1]: https://ru.wikipedia.org/wiki/RIP "RIP"
[2]: https://ru.wikipedia.org/wiki/%D0%A1%D0%B5%D1%82%D0%B5%D0%B2%D0%B0%D1%8F_%D0%BC%D0%BE%D0%B4%D0%B5%D0%BB%D1%8C_OSI "Сетевая модель OSI"
[3]: https://ru.wikipedia.org/wiki/1969 "1969"
[4]: https://ru.wikipedia.org/wiki/UDP "UDP"
[5]: //tools.ietf.org/html/rfc1058
[6]: //tools.ietf.org/html/rfc2453
[7]: https://ru.wikipedia.org/wiki/%D0%90%D0%BD%D0%B3%D0%BB%D0%B8%D0%B9%D1%81%D0%BA%D0%B8%D0%B9_%D1%8F%D0%B7%D1%8B%D0%BA "Английский язык"
[8]: https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%BB_%D0%BC%D0%B0%D1%80%D1%88%D1%80%D1%83%D1%82%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8 "Протокол маршрутизации"
[9]: https://ru.wikipedia.org/wiki/%D0%9C%D0%B0%D1%80%D1%88%D1%80%D1%83%D1%82%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F "Маршрутизация"
[10]: https://ru.wikipedia.org/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D1%81%D0%B5%D1%82%D1%8C "Компьютерная сеть"
[11]: https://ru.wikipedia.org/wiki/%D0%9C%D0%B0%D1%80%D1%88%D1%80%D1%83%D1%82%D0%B8%D0%B7%D0%B0%D1%82%D0%BE%D1%80 "Маршрутизатор"
[12]: https://ru.wikipedia.org/wiki/%D0%A2%D1%80%D0%B0%D0%BD%D0%B7%D0%B8%D1%82%D0%BD%D1%8B%D0%B9_%D1%83%D1%87%D0%B0%D1%81%D1%82%D0%BE%D0%BA "Транзитный участок"
[13]: https://ru.wikipedia.org/wiki/%D0%90%D0%BB%D0%B3%D0%BE%D1%80%D0%B8%D1%82%D0%BC "Алгоритм"
[14]: https://ru.wikipedia.org/wiki/%D0%90%D0%BB%D0%B3%D0%BE%D1%80%D0%B8%D1%82%D0%BC_%D0%91%D0%B5%D0%BB%D0%BB%D0%BC%D0%B0%D0%BD%D0%B0-%D0%A4%D0%BE%D1%80%D0%B4%D0%B0 "Алгоритм Беллмана-Форда"
[15]: https://ru.wikipedia.org/wiki/1969_%D0%B3%D0%BE%D0%B4 "1969 год"
[16]: https://ru.wikipedia.org/wiki/ARPANET "ARPANET"
[17]: https://ru.wikipedia.org/w/index.php?title=Gateway_Information_Protocol&amp;action=edit&amp;redlink=1 "Gateway Information Protocol (страница отсутствует)"
[18]: https://ru.wikipedia.org/wiki/PARC_Universal_Packet "PARC Universal Packet"
[19]: https://ru.wikipedia.org/wiki/IP "IP"
[20]: https://ru.wikipedia.org/wiki/BSD "BSD"
[21]: https://ru.wikipedia.org/wiki/Unix "Unix"
[22]: https://ru.wikipedia.org/wiki/IPv6 "IPv6"
[23]: https://ru.wikipedia.org/wiki/RIPng "RIPng"
[24]: /wiki/%D0%94%D0%B8%D1%81%D1%82%D0%B0%D0%BD%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%BE-%D0%B2%D0%B5%D0%BA%D1%82%D0%BE%D1%80%D0%BD%D0%B0%D1%8F_%D0%BC%D0%B0%D1%80%D1%88%D1%80%D1%83%D1%82%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F "Дистанционно-векторная маршрутизация"
[25]: https://ru.wikipedia.org/wiki/TCP/IP "TCP/IP"
[26]: https://ru.wikipedia.org/wiki/EIGRP "EIGRP"
[27]: https://ru.wikipedia.org/wiki/OSPF "OSPF"
